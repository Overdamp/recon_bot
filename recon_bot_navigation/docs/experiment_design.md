# การออกแบบการทดลองสำหรับหุ่นยนต์ Mecanum Mobile Robot

## 1. วัตถุประสงค์ (Objective)
เพื่อตรวจสอบความสามารถในการเคลื่อนที่แบบรอบทิศทาง (Holonomic capabilities) และความแม่นยำในการนำทางของหุ่นยนต์ล้อ Mecanum โดยใช้ ROS 2 Nav2

## 2. การเตรียมสภาพแวดล้อมการทดสอบ (Test Environment Setup)
**พื้นที่ (Area)**: พื้นเรียบขนาด 2.5 x 2.5 เมตร (เช่น พื้นกระเบื้องหรือปูนขัดมัน)
**การทำเครื่องหมาย (Markings)**: ใช้เทปกาวสีทำเครื่องหมายเป็นตารางพิกัด (Grid) บนพื้น
**อุปกรณ์วัด (Measurement Tools)**:
*   ตลับเมตร (Tape Measure) หรือ เลเซอร์วัดระยะ (Laser Distance Meter)
*   ไม้บรรทัดวัดมุม (Protractor) สำหรับวัด Theta Error
*   *หมายเหตุ: ไม่จำเป็นต้องใช้กล้องติดเพดาน (Overhead Camera) ให้ใช้การวัดมือเทียบกับ Grid ที่พื้นก็เพียงพอสำหรับงานนี้*

### แผนผังการวางตำแหน่ง (Layout Diagram)
```text
(แกน Y)
  ^
  |
2m+-----------------------+ (จุดเป้าหมาย C: 2,2)
  |                       |
  |                       |`
1m+          + (จุดเป้าหมาย B: 1,1)
  |                       |
  |                       |
0m+----------+------------+--> (แกน X)
 (จุดเริ่ม)   (จุดเป้าหมาย A: 1,0)
```

*   **จุดเริ่มต้น (Start Point - 0,0)**: กำหนดจุด "Home" และทิศทางหน้าหุ่น (ลูกศรชี้ไปทางแกน X+)
*   **จุดเป้าหมาย (Target Points)**:
    *   **A (1.0, 0.0)**: ทดสอบเดินหน้า
    *   **B (0.0, 1.0)**: ทดสอบเดินสไลด์ข้าง (Strafing)
    *   **C (1.0, 1.0)**: ทดสอบเดินเฉียง
    *   **D (0.0, 0.0, 180 องศา)**: ทดสอบการหมุนตัว

## 3. การทดลองที่ 1: ความแม่นยำของการเคลื่อนที่แบบ Open-Loop (Basic Control)
**ทำเพื่ออะไร?**: เพื่อพิสูจน์ว่า **"Hardware และ Kinematics ถูกต้อง"**
ถ้าการทดลองนี้ไม่ผ่าน (เช่น สั่งเดินข้างแล้วไหลไปข้างหน้า) แปลว่าล้อลื่น, ติดตั้งล้อผิด, หรือสูตรคำนวณผิด ซึ่งจะทำให้ Nav2 ทำงานเพี้ยนแน่นอน
**วิธีการ**: ส่งคำสั่งความเร็ว (`cmd_vel`) ตามระยะเวลาหรือระยะทางที่กำหนด

### 1.1 การทดสอบการเคลื่อนที่แนวด้านข้าง (Strafing Test - ซ้าย/ขวา) *สำคัญมากสำหรับ Mecanum*
*   **คำสั่ง**: เดินไปทางซ้าย 1.0 เมตร (`vy = 0.2 m/s`, `time = 5s`)
*   **สิ่งที่ต้องวัด**:
    *   **X-Error**: การไหลไปข้างหน้า/หลัง (ควรเป็น 0) -> *บอกคุณภาพการประกอบล้อ*
    *   **Y-Error**: ระยะห่างจากจุด 1.0 เมตรที่ตั้งไว้ -> *บอกความแม่นยำของ Motor Control*
    *   **Theta-Error**: การหมุนเหของหน้าหุ่น (ควรเป็น 0) -> *บอกความสมดุลของแรงเสียดทานทั้ง 4 ล้อ*

### 1.2 การทดสอบการหมุน (Rotation Test - อยู่กับที่)
*   **คำสั่ง**: หมุนรอบตัวเอง 360 องศา
*   **สิ่งที่ต้องวัด**: ความคลาดเคลื่อนของมุมสุดท้าย และการเคลื่อนที่ออกจากจุดศูนย์กลาง

## 4. การทดลองที่ 2: ความแม่นยำในการนำทางแบบ Closed-Loop (Nav2)
**ทำเพื่ออะไร?**: เพื่อพิสูจน์ว่า **"ระบบนำทาง (Software Stack) ทำงานสมบูรณ์"**
เป็นการโชว์ว่าหุ่นยนต์สามารถแก้ไขความผิดพลาดของ Hardware ได้ด้วย Sensor (Lidar/Camera) และ Algorithm (AMCL/SLAM)
**วิธีการ**: ส่งคำสั่ง "Nav2 Goal" ผ่าน Rviz หรือ Script

### 2.1 การเดินเป็นรูปสี่เหลี่ยม (Square Path - Holonomic)
*   **เส้นทาง**: (0,0) -> (1,0) -> (1,1) -> (0,1) -> (0,0)
*   **การหันหน้า**: บังคับให้หน้าหุ่นหันไปที่ 0 องศาตลอดเวลา (หุ่นหันหน้าไปทางเดิมเสมอ แต่เดินสไลด์เอา)
*   **สิ่งที่ต้องวัด**: ความคลาดเคลื่อนของตำแหน่งที่จุดแวะแต่ละจุด

## 5. ตารางบันทึกผลการทดลอง (Data Collection Tables)

### ตารางที่ 1: ความแม่นยำในการสไลด์ข้าง (Open Loop)
| ครั้งที่ | ระยะเป้าหมาย (m) | ระยะทางแกน Y ที่ได้จริง (m) | การไหลในแกน X (cm) | ความคลาดเคลื่อนมุม (deg) | หมายเหตุ |
|----------|------------------|-----------------------------|--------------------|--------------------------|----------|
| 1        | 1.0              |                             |                    |                          |          |
| 2        | 1.0              |                             |                    |                          |          |
| 3        | 1.0              |                             |                    |                          |          |
| **เฉลี่ย** |                  |                             |                    |                          |          |

### ตารางที่ 2: ความแม่นยำในการนำทางไปยังจุดต่างๆ (Nav2)
| ครั้งที่ | เป้าหมาย (x, y) | X สุดท้าย (m) | Y สุดท้าย (m) | มุมสุดท้าย (deg) | ระยะคลาดเคลื่อนรวม (cm) | ผ่านเกณฑ์? (Y/N) |
|----------|-----------------|---------------|---------------|------------------|-------------------------|------------------|
| 1        | (1.0, 0.0)      |               |               |                  |                         |                  |
| 2        | (0.0, 1.0)      |               |               |                  |                         |                  |
| 3        | (1.0, 1.0)      |               |               |                  |                         |                  |

## 6. แนวทางการนำเสนอต่อกรรมการ (Presentation Guide)

### 6.1 โครงสร้างการนำเสนอ
1.  **ปัญหา (Problem)**: หุ่นยนต์ทั่วไป (Differential Drive) ต้องหมุนตัวก่อนเดิน ทำให้เสียเวลาและใช้พื้นที่เยอะในที่แคบ
2.  **ทางแก้ (Solution)**: ใช้ล้อ Mecanum เพื่อให้เคลื่อนที่ได้รอบทิศทาง (Holonomic)
3.  **การพิสูจน์ (Verification)**:
    *   **ส่วนที่ 1 (Hardware)**: โชว์ผลการทดลอง Open-Loop ว่าหุ่นสไลด์ข้างได้จริง (โชว์กราฟ X-Error ต่ำๆ)
    *   **ส่วนที่ 2 (Software)**: โชว์ผลการทดลอง Nav2 ว่าหุ่นเดินเข้าเป้าหมายได้แม่นยำแม้จะมีแรงเสียดทานหรือพื้นลื่น

### 6.2 สิ่งที่ควรโชว์ในสไลด์
*   **วิดีโอ Split-Screen**: ซ้ายเป็นภาพหุ่นจริง ขวาเป็นหน้าจอ Rviz (โชว์ให้เห็นว่าสิ่งที่หุ่นคิดกับความจริงตรงกัน)
*   **กราฟเปรียบเทียบ**:
    *   กราฟแท่งเปรียบเทียบ Error ระหว่าง "เดินหน้าปกติ" vs "สไลด์ข้าง" (ปกติสไลด์ข้างจะ Error เยอะกว่านิดหน่อย ถ้าเราคุมได้ใกล้เคียงกันคือน่าประทับใจมาก)
*   **จุดเด่น**: เน้นย้ำว่าเราจูน `nav2_params.yaml` เพื่อรองรับ Holonomic Robot โดยเฉพาะ (โชว์ค่า `max_vel_y` และ `holonomic_robot: true`)

## 7. เกณฑ์ความสำเร็จ (Success Criteria)
*   **ความคลาดเคลื่อนของตำแหน่ง (Position Error)**: < 5 ซม. (ดีเยี่ยม), < 10 ซม. (ยอมรับได้)
*   **ความคลาดเคลื่อนของมุม (Heading Error)**: < 5 องศา
*   **การไหลขณะสไลด์ (Strafing Drift)**: ไหลไม่เกิน 10 ซม. ต่อการเดิน 1 เมตร
